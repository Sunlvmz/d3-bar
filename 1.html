<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
  //Width and height
  var w = 400;
  var h = 200;
  var barPadding = 2;  //柱状图之间的间距

  var dataset = [5, 10, 13, 19, 21, 25, 22, 18, 11, 7];

  //1. 创建SVG元素
  var svg = d3.select("body")
    .append("svg")
    .attr("width", w)
    .attr("height", h);


  svg.selectAll("rect")   // rect矩形
    .data(dataset)        // 连接指定的一组数据的和当前选择, 如果没有指定key函数，则values的第一数据被分配到当前选择中第一元素，第二数据分配给当前选择的第二个元素，依此类推
    .enter()              // 当前选择中存在但是当前DOM元素中还不存在的每个数据元素的占位符节点
    .append("rect")       // 在当前选择的每个元素最后追加具有指定名称的新元素，返回包含追加元素的新选择
    .attr("x", (d, i) => i * (w / dataset.length))    // 相当于柱子的左边在x轴的坐标(距离左上远点的x轴距离)
  .attr("fill", d => `rgba(200,100,200, ${(d / 25)})`)  // 效果是越高的柱子透明度越大，越明显
  .attr("y", d => h - (d * 4))                          // y轴是朝下的, height也是朝下延伸的
  .attr("width", w / dataset.length - barPadding)    // 柱子的宽度
    .attr("height", d => d * 4);                       // 柱子的高度
</script>
</body>
</html>